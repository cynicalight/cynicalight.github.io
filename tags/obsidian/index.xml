<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Obsidian on BU44ER's BLOG</title><link>https://bu44er.ink/tags/obsidian/</link><description>Recent content in Obsidian on BU44ER's BLOG</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Mon, 09 Dec 2024 14:15:03 +0800</lastBuildDate><atom:link href="https://bu44er.ink/tags/obsidian/index.xml" rel="self" type="application/rss+xml"/><item><title>自制obsidian插件 Image Size: 设置默认粘贴图片的尺寸</title><link>https://bu44er.ink/p/74665601/</link><pubDate>Mon, 09 Dec 2024 14:15:03 +0800</pubDate><guid>https://bu44er.ink/p/74665601/</guid><description>&lt;ul>
&lt;li>github：&lt;a class="link" href="https://github.com/cynicalight/obsidian-image-size" target="_blank" rel="noopener"
>GitHub - cynicalight/obsidian-image-size: Set the default size for pasted images.&lt;/a>&lt;/li>
&lt;li>参考：&lt;a class="link" href="https://docs.obsidian.md/Plugins/Getting&amp;#43;started/Build&amp;#43;a&amp;#43;plugin" target="_blank" rel="noopener"
>Build a plugin - Developer Documentation&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>obsidian默认粘贴的图片的宽度总是占满笔记宽度的，我在粘贴一些网课的ppt的时候总是感觉这种默认设置显得图片太大了，当然，我可以直接修改图片的md链接在方括号中写一个大小，比如400，但是每次改太麻烦了，我希望有一个默认粘贴图片宽度的预设，于是写了这个简单的插件 Image Size，真的非常简单&amp;hellip;&lt;/p>
&lt;p>实现这一目的的主要过程就是以下两步：&lt;/p>
&lt;ol>
&lt;li>阻止系统的默认粘贴：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ts" data-lang="ts">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 阻止默认粘贴行为
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">items&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">let&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">items&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">item&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">items&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="kr">type&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">startsWith&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;image/&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">evt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">preventDefault&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>调用obsidian的editor自己插入一个图片（md语句）：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ts" data-lang="ts">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 插入 Markdown 图片链接
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">cursor&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">editor&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getCursor&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">markdownImage&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sb">`![&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">settings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">imageSize&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">](&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">imageNameMd&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">)`&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">editor&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">replaceRange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">markdownImage&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cursor&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>由于阻止了默认的粘贴，所以我需要再写一个保存图片文件到设置的附件文件夹的操作，这里就不展示了。&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="20240320">20240320
&lt;/h2>&lt;p>在提交社区review的时候，按照他们的要求改了挺多的，详见github。&lt;/p></description></item></channel></rss>